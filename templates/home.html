<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartSpend – Home</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
</head>
<body>
    <!-- Navigation bar with links to main pages -->
    <header class="navbar">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="SmartSpend Logo" class="nav-logo">
    <nav>
        <a href="/home" class="active">Home</a>
        <a href="/add" >Add Expense</a>
        <a href="/summary">Summary</a>
        <a href="/saving">Saving</a>
        <a href="/settings">Settings</a>
        <a href="/logout" style="float: right; margin-left: 20px;">Logout</a>
    </nav>
    </header>

    <main>
    <div class="dashboard">
      <!-- Income Calculator Section -->
      <section class="card income-calculator">
        <h2>Income Calculator</h2>
        
        {% if yearly %}
        <div class="income-display">
          <h3>Your Earnings:</h3>
          <div class="earnings-grid">
            <div class="earning-item">
              <span class="earning-label">Weekly:</span>
              <span class="earning-value">${{ "%.2f"|format(weekly) }}</span>
            </div>
            <div class="earning-item">
              <span class="earning-label">Monthly:</span>
              <span class="earning-value">${{ "%.2f"|format(monthly) }}</span>
            </div>
            <div class="earning-item">
              <span class="earning-label">Yearly:</span>
              <span class="earning-value">${{ "%.2f"|format(yearly) }}</span>
            </div>
          </div>
          
          <form action="/update-income" method="POST" style="margin-top: 20px;">
            <label for="new-income">Update Income:</label>
            <input type="number" name="income" id="new-income" placeholder="New yearly income" required>
            <button type="submit" class="save-btn">Update</button>
          </form>
        </div>
        {% else %}
        <form action="/set-income" method="POST" class="income-form">
          <label for="yearly-income">Enter Your Yearly Income:</label>
          <input type="number" name="income" id="yearly-income" placeholder="e.g., 50000" step="0.01" required>
          <button type="submit" class="save-btn">Save Income</button>
        </form>
        {% endif %}
      </section>

      <!-- Weekly expenses summary -->
      <section class="card">
        <h2>This Week</h2>
        <p>${{ total_week }}</p>
        <ul class="category-summary">
          {% for category, amount in week_category_summary %}
          <li>✔ {{ category }}, ${{ "%.2f"|format(amount) }}</li>
          {% endfor %}
        </ul>
      </section>

      <!-- Monthly expenses summary -->
      <section class="card">
        <h2>This Month</h2>
        <p>${{ total_month }}</p>
        <ul class="category-summary">
          {% for category, amount in month_category_summary %}
          <li>✔ {{ category }}, ${{ "%.2f"|format(amount) }}</li>
          {% endfor %}
        </ul>
      </section>

      <!-- Savings summary -->
      <section class="card">
        <h2>Savings</h2>
        <p>${{ total_saved }}</p>
        {% if all_goals %}
        <ul class="category-summary">
            {% for goal in all_goals %}
            <li>✔ Goal: {{ goal[0] }}, Target: ${{ "%.2f"|format(goal[1]) }}</li>
            {% endfor %}
        </ul>
        {% endif %}
      </section>

    <!-- Floating button to add new expense -->
    <a href="/add" class="floating-btn">+</a>
  </main>
</body>
</html>
